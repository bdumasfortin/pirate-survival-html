<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link href="https://fonts.googleapis.com/css2?family=Zain:wght@300&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="/src/style.css" />
    <title>SailorQuest</title>
  </head>
  <body>
    <div id="app">
      <canvas id="game"></canvas>
      <div id="net-indicator" class="net-indicator hidden">Resyncing...</div>
      <div id="seed-menu" class="overlay">
        <div class="menu-card">
          <div class="menu-title">SailorQuest</div>
          <div class="menu-note">* This game is currently in development, expect bugs and missing features *</div>
          <div class="mode-toggle">
            <button id="mode-solo" type="button" class="mode-btn active">Solo</button>
            <button id="mode-multi" type="button" class="mode-btn">Multiplayer</button>
          </div>

          <div id="solo-panel" class="menu-panel">
            <label for="seed-input">World seed</label>
            <div class="seed-row">
              <input id="seed-input" type="text" placeholder="Enter seed" autocomplete="off" />
              <button id="seed-random" type="button">Random</button>
            </div>
            <label for="world-preset">World type</label>
            <select id="world-preset" class="menu-select">
              <option value="procedural" selected>Standard</option>
              <option value="test">Test</option>
            </select>
            <button id="start-game" type="button" class="primary">Let's go!</button>
          </div>

          <div id="multi-panel" class="menu-panel hidden">
            <div id="room-form" class="room-step">
              <label for="player-name">Player name</label>
              <input id="player-name" type="text" placeholder="Your name" maxlength="16" autocomplete="off" />

              <div class="mode-toggle">
                <button id="multi-create" type="button" class="mode-btn active">Host Room</button>
                <button id="multi-join" type="button" class="mode-btn">Join Room</button>
              </div>

              <label for="server-url">Server URL</label>
              <input id="server-url" type="text" placeholder="ws://localhost:8787" autocomplete="off" />

              <div class="server-build-link create-only">
                <span>Hosting your own server? </span>
                <a
                  href="https://github.com/bdumasfortin/pirate-survival-html/releases/latest"
                  target="_blank"
                  rel="noopener"
                >Get the server build</a>
              </div>

              <div class="menu-row">
                <div class="menu-field join-only">
                  <label for="room-code">Room code</label>
                  <input id="room-code" type="text" placeholder="ABCDE" maxlength="5" autocomplete="off" />
                </div>
              </div>

              <label for="seed-input-mp" class="create-only">Host seed (optional)</label>
              <div class="seed-row create-only">
                <input id="seed-input-mp" type="text" placeholder="Enter seed" autocomplete="off" />
                <button id="seed-random-mp" type="button">Random</button>
              </div>
              <label for="world-preset-mp" class="create-only">World type</label>
              <select id="world-preset-mp" class="menu-select create-only">
                <option value="procedural" selected>Standard</option>
                <option value="test">Test</option>
              </select>

              <div class="menu-actions">
                <button id="create-room" type="button" class="create-only">Create Room</button>
                <button id="join-room" type="button" class="join-only hidden">Join Room</button>
              </div>

              <div class="status-box hidden">
                <div class="status-text" id="room-status-form">Status: idle</div>
              </div>
            </div>

            <div id="room-screen" class="room-step hidden">
              <button id="leave-room" type="button" class="secondary danger">Leave Room</button>
              <div class="status-box">
                <div class="status-text" id="room-status">Status: idle</div>
                <div class="status-info">
                  <span>Room: <strong id="room-code-display">--</strong></span>
                  <span>Players: <strong id="room-player-count">0/0</strong></span>
                </div>
              </div>
              <button id="copy-join-link" type="button" class="copy-link" disabled>Copy join link</button>

              <button id="start-room" type="button" class="primary hidden" disabled>Let's go!</button>
            </div>
          </div>

          <div class="menu-links">
            <a href="https://github.com/bdumasfortin/pirate-survival-html" target="_blank" rel="noopener">GitHub</a>
            <span class="menu-links__divider">•</span>
            <a href="https://github.com/bdumasfortin/pirate-survival-html/blob/main/CHANGELOG.md" target="_blank" rel="noopener">Changelog</a>
            <span class="menu-links__divider">•</span>
            <a href="https://github.com/bdumasfortin/pirate-survival-html/issues/new" target="_blank" rel="noopener">Issues</a>
          </div>
        </div>
      </div>
      <div id="loading-overlay" class="overlay hidden">
        <div class="loading-card">Generating world...</div>
      </div>
    <div id="in-game-menu" class="overlay hidden">
      <div class="menu-card menu-card--compact">
        <div class="menu-actions">
          <button id="resume-game" type="button">Resume</button>
          <button id="exit-to-menu" type="button" class="primary">Exit to Main Menu</button>
          </div>
        </div>
      </div>
    </div>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
